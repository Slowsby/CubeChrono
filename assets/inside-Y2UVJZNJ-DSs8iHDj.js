const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/twsearch-MRZGOB6T-BWSQ5aOu.js","assets/index-BPxrAku9.js","assets/index-DXi7FWzY.css","assets/search-dynamic-sgs-side-events-RPVZU2YB-DtKNxlJZ.js","assets/chunk-Y3BVWVFU-CifgQ9nJ.js","assets/search-dynamic-solve-4x4x4-V5D7RQND-Bpaq-_2J.js","assets/search-dynamic-solve-fto-UOKDYVD5-BQ6DBRFW.js","assets/search-dynamic-sgs-unofficial-2TYKOUM4-Cfb86VLa.js","assets/search-dynamic-solve-kilominx-RAZM75GA-wZ4weJ4b.js","assets/search-dynamic-solve-master_tetraminx-3D4MBF3V-CkH0uusM.js","assets/search-dynamic-solve-sq1-YESVPPLF-MPqda4XO.js"])))=>i.map(i=>d[i]);
var V=Object.defineProperty;var $=(e,r,t)=>r in e?V(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var z=(e,r,t)=>$(e,typeof r!="symbol"?r+"":r,t);import{f as y,T as A,b as f,_ as v,K as S,p as g,s as j,c as H,m as d,d as J,g as Z,r as Q,h as X,i as Y,j as ee,A as _,M as re,k as te,l as ae}from"./index-BPxrAku9.js";import{e as ne}from"./search-worker-entry-BN_JCMSh.js";var T=class extends A{constructor(e){super(),this.metric=e}traverseAlg(e){let r=0;for(const t of e.childAlgNodes())r+=this.traverseAlgNode(t);return r}traverseGrouping(e){const r=e.alg;return this.traverseAlg(r)*Math.abs(e.amount)}traverseMove(e){return this.metric(e)}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 0}traverseNewline(e){return 0}traverseLineComment(e){return 0}},ie=class extends A{traverseAlg(e){let r=0;for(const t of e.childAlgNodes())r+=this.traverseAlgNode(t);return r}traverseGrouping(e){const r=e.alg;return this.traverseAlg(r)*Math.abs(e.amount)}traverseMove(e){return 1}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 1}traverseNewline(e){return 1}traverseLineComment(e){return 1}};function L(e){return"A"<=e&&e<="Z"}function F(e){const r=e.family;return L(r[0])&&r[r.length-1]==="v"||r==="x"||r==="y"||r==="z"||r==="T"?0:1}function se(e){return 1}function N(e){const r=e.family;return L(r[0])&&r[r.length-1]==="v"||r==="x"||r==="y"||r==="z"||r==="T"?0:1}function oe(e){return Math.abs(e.amount)*N(e)}var ce=y(T,[F]);y(T,[se]);y(T,[oe]);y(T,[N]);y(ie,[F]);var le=class extends A{traverseAlg(e){let r=0;for(const t of e.childAlgNodes())r+=this.traverseAlgNode(t);return r}traverseGrouping(e){return this.traverseAlg(e.alg)*Math.abs(e.amount)}traverseMove(e){return 1}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 1}traverseNewline(e){return 0}traverseLineComment(e){return 0}};y(le);var ue=2;function me(e,r){const t=[];for(const a of r){const n=new re(a);if(n.amount!==1)throw new Error("SGS cannot handle def moves with an amount other than 1 yet.");let i=e.identityTransformation();for(let w=1;i=i.applyMove(n),!i.isIdentityTransformation();w++)t.push({move:n.modified({amount:w}),transformation:i})}return t}var p=class{constructor(e,r,t){z(this,"searchMoves");this.kpuzzle=e,this.sgs=r,this.searchMoves=me(this.kpuzzle,t??Object.keys(this.kpuzzle.definition.moves))}async solve(e,r=ue,t){const a=e.experimentalToTransformation();if(!a)throw new Error("distinguishable pieces are not supported in tremble solver yt");let n=null,i=1e6;const w=(u,b,c)=>{if(b===0){const o=this.sgsPhaseSolve(u,i);if(!o)return;const h=c.concat(o).experimentalSimplify({cancel:{directional:"any-direction",puzzleSpecificModWrap:"canonical-centered"},puzzleSpecificSimplifyOptions:{quantumMoveOrder:t}}),m=ce(h);(n===null||m<i)&&(n=h,i=m);return}for(const o of this.searchMoves)w(u.applyTransformation(o.transformation),b-1,c.concat([o.move]))};for(let u=0;u<=r;u++)w(a,u,new _);if(n===null)throw new Error("SGS search failed.");return n}sgsPhaseSolve(e,r){const t=new te;let a=e;for(const n of this.sgs.ordering){const i=n.pieceOrdering;let w="";const u=a.invert();for(let c=0;c<i.length;c++){const o=i[c],h=o.orbitName,m=o.permutationIdx;w+=` ${u.transformationData[h].permutation[m]} ${u.transformationData[h].orientationDelta[m]}`}const b=n.lookup[w];if(!b)throw new Error("Missing algorithm in sgs or esgs?");if(t.experimentalPushAlg(b.alg),t.experimentalNumAlgNodes()>=r)return null;a=a.applyTransformation(b.transformation);for(let c=0;c<i.length;c++){const o=i[c],h=o.orbitName,m=o.permutationIdx;if(a.transformationData[h].permutation[m]!==m||a.transformationData[h].orientationDelta[m]!==0)throw new Error("bad SGS :-(")}}return t.toAlg()}};function fe(e,r){let t=e.identityTransformation();for(const a of r.ordering){const n=ae(Object.values(a.lookup));t=t.applyTransformation(n.transformation)}return t.toKPattern()}var B=f(async()=>v(()=>import("./twsearch-MRZGOB6T-BWSQ5aOu.js"),__vite__mapDeps([0,1,2])));async function I(e,r,t){const{wasmTwsearch:a}=await B;return a(e,r,t)}async function ve(e){const{wasmRandomScrambleForEvent:r}=await B;return r(e)}var l=f(()=>v(()=>import("./search-dynamic-sgs-side-events-RPVZU2YB-DtKNxlJZ.js"),__vite__mapDeps([3,1,2,4]))),M=null;async function de(){return M||(M=(async()=>{const e=await(await l).cachedData222();return new p(await g["2x2x2"].kpuzzle(),e,"URFLBD".split(""))})())}async function we(){await de()}async function he(e){return d(),I((await J.kpuzzle()).definition,e,{generatorMoves:"UFLR".split("")})}var K=f(()=>v(()=>import("./search-dynamic-solve-4x4x4-V5D7RQND-Bpaq-_2J.js"),__vite__mapDeps([5,1,2]))),Se=[[null,"x","x2","x'","z","z'"],[null,"y","y2","y'"]];async function ge(){return(await K).initialize()}async function U(){return d(),(await K).random444Scramble()}async function be(){return ee(await U(),Se)}var ye=f(()=>v(()=>import("./search-dynamic-solve-fto-UOKDYVD5-BQ6DBRFW.js"),__vite__mapDeps([6,1,2])));f(()=>v(()=>import("./search-dynamic-sgs-unofficial-2TYKOUM4-Cfb86VLa.js"),__vite__mapDeps([7,4,1,2])));async function _e(){return d(),new _(await(await ye).getRandomFTOScramble())}var Te=f(()=>v(()=>import("./search-dynamic-solve-kilominx-RAZM75GA-wZ4weJ4b.js"),__vite__mapDeps([8,1,2])));async function pe(){return d(),(await Te).getRandomKilominxScramble()}var Ee=f(()=>v(()=>import("./search-dynamic-solve-master_tetraminx-3D4MBF3V-CkH0uusM.js"),__vite__mapDeps([9,1,2])));async function Pe(){return d(),new _(await(await Ee).randomMasterTetraminxScrambleString())}var xe=2,R=null;async function Ae(){return R||(R=(async()=>{const e=await(await l).cachedSGSDataMegaminx();return new p(await(await l).cachedMegaminxKPuzzleWithoutMO(),e,["U","R","F","L","BR","BL","FR","FL","DR","DL","B","D"])})())}async function ze(e){d();const r=await Ae(),t=structuredClone(e.patternData);t.CENTERS.orientation=new Array(12).fill(0);const a=new S(await(await l).cachedMegaminxKPuzzleWithoutMO(),t);return await r.solve(a,xe,()=>5)}var Me=3,C=null;async function Re(){return C||(C=(async()=>{const e=await(await l).sgsDataPyraminx();return new p(await g.pyraminx.kpuzzle(),e,"RLUB".split(""))})())}async function Ce(e){return d(),await(await Re()).solve(e,Me,()=>3)}var Oe=f(()=>v(()=>import("./search-dynamic-sgs-unofficial-2TYKOUM4-Cfb86VLa.js"),__vite__mapDeps([7,4,1,2])));async function ke(){return d(),(await Oe).getRandomRediCubeScramble()}var De=3,O=null;async function Le(){return O||(O=(async()=>{const e=await(await l).sgsDataSkewb();return new p(await(await l).skewbKPuzzleWithoutMOCached(),e,"RLUB".split(""))})())}async function Fe(e){return new S(await(await l).skewbKPuzzleWithoutMOCached(),{CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}})}async function G(e){return d(),await(await Le()).solve(await Fe(e),De,a=>a.family==="y"?4:3)}async function Ne(){return fe(await(await l).skewbKPuzzleWithoutMOCached(),await(await l).sgsDataSkewbFixedCorner())}async function Be(){return G(await Ne())}var Ie=f(()=>v(()=>import("./search-dynamic-solve-sq1-YESVPPLF-MPqda4XO.js"),__vite__mapDeps([10,1,2])));async function Ke(){return _.fromString(await(await Ie).getRandomSquare1ScrambleString())}var Ue=1e3;Z(!0);var W=!0;function Ge(e){W=e}function k(){return(typeof performance>"u"?Date:performance).now()}async function s(e,r,t){if(!W)return r();const a=k(),n=r();n!=null&&n.then&&await n;const i=k();return console.warn(`${e}${t!=null&&t.isPrefetch?" (prefetched)":""}: ${Math.round(i-a)}ms`),n}var E=new Map,P=null;async function D(e,r){function t(){return s(`wasmRandomScrambleForEvent(${JSON.stringify(e)})`,()=>ve(e),{isPrefetch:r==null?void 0:r.isPrefetch})}switch(e){case"222":return(await t()).experimentalSimplify({puzzleSpecificSimplifyOptions:{quantumMoveOrder:()=>4}});case"555":case"666":case"777":case"333fm":case"minx":case"pyram":case"555bf":return t();case"333":case"333oh":case"333ft":return s("random333Scramble",X,{isPrefetch:r==null?void 0:r.isPrefetch});case"333bf":case"333mbf":return s("random333OrientedScramble",Q);case"444":return s("random444Scramble",U,{isPrefetch:r==null?void 0:r.isPrefetch});case"444bf":return s("random444OrientedScramble",be);case"skewb":return s("randomSkewbFixedCornerScramble",Be);case"sq1":return s("getRandomSquare1Scramble",Ke,{isPrefetch:r==null?void 0:r.isPrefetch});case"fto":return s("randomFTOScramble",_e,{isPrefetch:r==null?void 0:r.isPrefetch});case"master_tetraminx":return s("randomMasterTetraminxScramble",Pe);case"kilominx":return s("randomKilominxScramble",pe,{isPrefetch:r==null?void 0:r.isPrefetch});case"redi_cube":return s("randomRediCubeScramble",ke,{isPrefetch:r==null?void 0:r.isPrefetch});default:throw new Error(`unsupported event: ${e}`)}}var x="auto",q={initialize:async e=>{switch(e){case"222":return s("preInitialize222",we);case"333":case"333oh":case"333ft":return s("initialize333",Y);case"444":return s("initialize444",ge);default:throw new Error(`unsupported event: ${e}`)}},setScramblePrefetchLevel(e){x=e},randomScrambleForEvent:async e=>{let r=E.get(e);return r?E.delete(e):r=D(e),x!=="none"&&r.then(()=>{P&&clearTimeout(P),P=setTimeout(()=>{E.set(e,D(e,{isPrefetch:!0}))},x==="immediate"?0:Ue)}),r},randomScrambleStringForEvent:async e=>(await q.randomScrambleForEvent(e)).toString(),solve333ToString:async e=>{const r=new S(await g["3x3x3"].kpuzzle(),e);return(await j(r)).toString()},solve222ToString:async e=>{const r=new S(await g["2x2x2"].kpuzzle(),e);return(await he(r)).toString()},solveSkewbToString:async e=>{const r=new S(await g.skewb.kpuzzle(),e);return(await G(r)).toString()},solvePyraminxToString:async e=>{const r=new S(await g.pyraminx.kpuzzle(),e);return(await Ce(r)).toString()},solveMegaminxToString:async e=>{const r=new S(await g.megaminx.kpuzzle(),e);return(await ze(r)).toString()},setDebugMeasurePerf:async e=>{Ge(e)},solveTwsearchToString:async(e,r,t)=>{const a=new H(e),n=new S(a,r);return(await I(e,n,t)).toString()}};ne(q);
